@(tarefa: Tarefa, tarefaForm: Form[Tarefa], tarefas: List[Tarefa], estudoForm: Form[Estudo])

@implicitFieldConstructor = @{ b4.vertical.fieldConstructor() }

@styles = {
    <link href="@routes.Assets.versioned("css/relatorio.css")" rel="stylesheet">
}

@scripts = {
	<script src="@routes.Assets.versioned("js/concluir-tarefa.js")"></script>
}

@import java.util.Calendar

@dataCalculada(data: Integer) = @{	
	
	val hoje = Calendar.getInstance(TimeZone.getDefault());
	val dia = (hoje.get(Calendar.DAY_OF_YEAR) + data) % 30;
	val mes = ((hoje.get(Calendar.DAY_OF_YEAR) + data) / 30) + 1;
	val ano = hoje.get(Calendar.YEAR);
	
	Integer.toString(dia) +	" a " +
			Integer.toString(dia + 2) + 
			"/" + Integer.toString(mes) +
			"/" + Integer.toString(ano);
}

@mainEstudo("Tarefa 1", tarefa, tarefaForm, styles, scripts) {

<div id="tabela" class="container w-50">
	<h3 class="text-center">Relatório</h3>
	<table class="table table-hover">
		<thead>
			<th>ID Tarefa</th>
			<th>Tempo</th>
			<th>Cliques</th>
			<th>Concluído Percebido</th>
			<th>Concluído Real</th>
		</thead>
		<tbody>
			@for(tarefa <- tarefas) {
			<tr>
				<td>@tarefa.getCodigo</td>
				<td>@{(tarefa.getDataHoraFim.getTime - tarefa.getDataHoraInicio.getTime)/1000;} s</td>
				<td>@tarefa.getCliques</td>
				<td>@tarefa.isConcluidoPercebido</td>
				<td>@tarefa.isConcluidoReal</td>
			</tr>
			}
		</tbody>
	</table>
	@b4.formCSRF(routes.ControladorEstudos.iniciarEstudoDeCaso, 
		'id -> "loginform", 
		'class -> "form-horizontal", 
		'role -> "form") {

		@b4.hidden( estudoForm("tipo"), 'value -> tarefa.getEstudo.isTipo )
		
		<input type="submit" value="Próxima Tarefa" class="btn btn-primary center-block">
	}
</div>
}